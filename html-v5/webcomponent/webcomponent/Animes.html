<!--
start template...it won't display until we tell it to in
main.js
-->
<template id="Xtemplate">
<style>
  
  /*
   * use something like Polymer & you don't need to use 
   * "@import".
   */
  @import url("css/normalize.min.css");
  @import url("css/bootstrap.min.css");

  /* none of these styles can be accessed outside the template */
  .templateArticle {
    display: inline-block;
    margin: 6px;
  }

  .btn {
    margin: 10px;
    float: right;
  }

  .thumbnail {
    margin-bottom: 0;
  }

  .AnimeTitleClass {
    text-align: left;
  }

  #AnimeTitle {
    font-style: italic;
  }

</style>

<article class="templateArticle panel panel-default">
  <header class="panel-heading">
    <h2 class="panel-title AnimeTitleClass">

      <!-- some content will load in these two span tags -->
      <span id="AnimeTitle"></span>
      <br />
      <span id="Animemark">
        <span class=".glyphicon .glyphicon-star-empty"></span>
        <span class=".glyphicon .glyphicon-star-empty"></span>
        <span class=".glyphicon .glyphicon-star-empty"></span>
        <span class=".glyphicon .glyphicon-star-empty"></span>
        <span class=".glyphicon .glyphicon-star-empty"></span>
      </span>
    </h2>
  </header>

  <!--
    some content will load into src and alt attributes for this
    img tag
  -->
  <img src="" alt="" class="thumbnail" width="250px" height="350px">

  <!--
    some content will load in the href attribute for this a tag
  -->
  <a href="" id="btnPurchase" class="btn btn-primary" role="button" target="blank">watch at youtube</a>
</article>
</template> <!-- #singleAnime -->

<script>
  (function(){

  // App data
  var Animes = {
    "Anime1" : {
      "title": "火影",
      "mark": "4.5",
      "image": "images/timg.jpeg",
      "campLink": ""
    },
    "Anime2" : {
      "title": "海贼",
      "mark":  "5",
      "image": "images/timg2.jpeg",
      "campLink": ""
    },
    "Anime3" : {
      "title": "死神",
      "mark": "4",
      "image": "images/timg1.jpeg",
      "campLink": ""
    },
    "Anime4" : {
      "title": "斗罗大陆",
      "mark":  "3.5",
      "image": "images/timg3.jpeg",
      "campLink": ""
    }
  };

  // Select templates & build Shadow DOM & Shadow Root
  var doc = document.currentScript.ownerDocument,
    template = doc.querySelector("#Xtemplate"),
    templateContent = template.content,
    host = document.querySelector("#allAnimes"),
    root = host.createShadowRoot();
    /*
    * A cool trick: uncomment the 2 console.log statements below to
    * see what the 'host' and 'root' variables look like when
    * rendered!!!
    */

    // console.log(host);
    // console.log(root);

  // Use a for...in loop to load "Animes" data in  <template>
  for (key in Animes) {
    var title = Animes[key].title,
        mark = Animes[key].mark,
        image = Animes[key].image,
        campLink = Animes[key].campLink;

    // Add image data to src in <img> tag in <template>
    templateContent.querySelector("img").src = image;

    // Add title data to alt in <img> tag & "#AnimeTitle" in <template>
    templateContent.querySelector("img").alt 
    = templateContent.querySelector("#AnimeTitle").innerHTML
    = title;
    
    // Add mark data to "#Animemark" in <template>
    templateContent.querySelector("#Animemark").innerHTML = mark;

    // Add campLink data to href in "#btnPurchase" in <template>
    templateContent.querySelector("#btnPurchase").href = campLink;

    /*  
        document.importNode()
        概述
          将外部文档的一个节点拷贝一份,然后可以把这个拷贝的节点插入到当前文档中.
      
        语法

          var node = document.importNode(externalNode, deep);

        node

          导入当前文档的新节点. 新节点的 parentNode 是 null, 因为它还没有插入当前文档的文档树中,属于游离状态.

        externalNode

          将要从外部文档导入的节点.
        deep 可选
        一个布尔值,表明是否要导入节点的后代节点.

    */

    root.appendChild(document.importNode(templateContent.querySelector(".templateArticle"), true));
  }

  /*
  * Copy JUST the <style> tag content & place it in the Shadow Root.
  * This is done OUTSIDE the "for...in" loop so that the <style> tag
  * doesn't get duplicated every time it iterates.
  */
  root.appendChild(document.importNode(templateContent.querySelector("style"), true));

  })();
</script>